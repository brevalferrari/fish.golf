<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="765px" preserveAspectRatio="none" style="width:1684px;height:765px;background:#FFFFFF;" version="1.1" viewBox="0 0 1684 765" width="1684px" zoomAndPan="magnify"><title>Token.apply</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77.5537" x="801.9387" y="32.9883">Token.apply</text><ellipse cx="832.2156" cy="57.4063" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><ellipse cx="832.2156" cy="97.4063" fill="#F1F1F1" rx="10" ry="10" style="stroke:#181818;stroke-width:0.5;"/><path d="M833.8562,99.1875 L834.9812,99.1875 Q834.8562,100.4063 834.0593,101.2188 Q833.2781,102.0313 831.7468,102.0313 Q830.2625,102.0313 829.3406,100.9688 Q828.4343,99.8906 828.4187,98.125 L828.4187,97.2188 Q828.4187,95.4219 829.3406,94.3438 Q830.2625,93.25 831.8406,93.25 Q833.2937,93.25 834.075,94.0469 Q834.8562,94.8438 834.9812,96.1094 L833.8562,96.1094 Q833.7312,95.2188 833.2781,94.7031 Q832.8406,94.1875 831.8406,94.1875 Q830.7156,94.1875 830.1218,95.0156 Q829.5437,95.8438 829.5437,97.2031 L829.5437,98.0625 Q829.5437,99.3281 830.075,100.2188 Q830.6062,101.1094 831.7468,101.1094 Q832.825,101.1094 833.2625,100.6094 Q833.7156,100.0938 833.8562,99.1875 Z " fill="#000000"/><polygon fill="#F1F1F1" points="820.2156,127.4063,844.2156,127.4063,856.2156,139.4063,844.2156,151.4063,820.2156,151.4063,808.2156,139.4063,820.2156,127.4063" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="6.5635" x="828.9338" y="143.166">T</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="90.9336" x="11" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70.9336" x="21" y="208.3203">render(None)</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="68.9844" x="111.9336" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48.9844" x="121.9336" y="208.3203">result = []</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="69.166" x="190.978" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49.166" x="200.978" y="208.3203">render(n)</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="237.2891" x="270.144" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="217.2891" x="280.144" y="208.3203">variables[name] = change.eval(variables)</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="174.8047" x="659.022" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.8047" x="669.022" y="208.3203">old_context = context.clone()</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="112.0684" x="690.3901" y="241.25"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92.0684" x="700.3901" y="262.3828">context.result = []</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="350.5332" x="571.1577" y="295.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="330.5332" x="581.1577" y="316.4453">new_context = fold inner into current context with Token.apply</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="457.9824" x="517.4331" y="349.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="437.9824" x="527.4331" y="370.5078">return new_context.replace(result, old_context.result + new_context.result * count)</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="193.9063" x="1065.9146" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="173.9063" x="1075.9146" y="208.3203">current_length = current_length()</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="336.9629" x="994.3862" y="241.25"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="316.9629" x="1004.3862" y="262.3828">calculate how many samples should fit in the current length</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="174.8047" x="1075.4653" y="295.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154.8047" x="1085.4653" y="316.4453">old_context = context.clone()</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="112.0684" x="1106.8335" y="349.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92.0684" x="1116.8335" y="370.5078">context.result = []</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="350.5332" x="987.6011" y="403.4375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="330.5332" x="997.6011" y="424.5703">new_context = fold inner into current context with Token.apply</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="284.7793" x="1020.478" y="457.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="264.7793" x="1030.478" y="478.6328">new_context.variables[t] = old_context.variables[t]</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="354.9043" x="985.4155" y="511.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="334.9043" x="995.4155" y="532.6953">spray new_context.result with void until it fits the sample count</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161.75" x="1081.9927" y="565.625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141.75" x="1091.9927" y="586.7578">prepend old_context.result</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="119.5449" x="1103.0952" y="619.6875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99.5449" x="1113.0952" y="640.8203">return new context</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="289.4316" x="1367.1597" y="187.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="269.4316" x="1377.1597" y="208.3203">slopes += (each_frame.name, each_frame.change)</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="323.1113" x="1350.3198" y="241.25"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="303.1113" x="1360.3198" y="262.3828">context = fold inner into current context with Token.apply</text><rect fill="#F1F1F1" height="34.0625" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="193.5313" x="1415.1099" y="295.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="173.5313" x="1425.1099" y="316.4453">slopes[each_frame.name].drop()</text><polygon fill="#F1F1F1" points="832.2156,663.75,832.2156,663.75,844.2156,675.75,832.2156,687.75,832.2156,687.75,820.2156,675.75,832.2156,663.75" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="832.2156" cy="718.75" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="832.2156" cy="718.75" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="832.2156" x2="832.2156" y1="67.4063" y2="87.4063"/><polygon fill="#181818" points="828.2156,77.4063,832.2156,87.4063,836.2156,77.4063,832.2156,81.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="746.4243" x2="746.4243" y1="221.25" y2="241.25"/><polygon fill="#181818" points="742.4243,231.25,746.4243,241.25,750.4243,231.25,746.4243,235.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="746.4243" x2="746.4243" y1="275.3125" y2="295.3125"/><polygon fill="#181818" points="742.4243,285.3125,746.4243,295.3125,750.4243,285.3125,746.4243,289.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="746.4243" x2="746.4243" y1="329.375" y2="349.375"/><polygon fill="#181818" points="742.4243,339.375,746.4243,349.375,750.4243,339.375,746.4243,343.375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="221.25" y2="241.25"/><polygon fill="#181818" points="1158.8677,231.25,1162.8677,241.25,1166.8677,231.25,1162.8677,235.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="275.3125" y2="295.3125"/><polygon fill="#181818" points="1158.8677,285.3125,1162.8677,295.3125,1166.8677,285.3125,1162.8677,289.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="329.375" y2="349.375"/><polygon fill="#181818" points="1158.8677,339.375,1162.8677,349.375,1166.8677,339.375,1162.8677,343.375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="383.4375" y2="403.4375"/><polygon fill="#181818" points="1158.8677,393.4375,1162.8677,403.4375,1166.8677,393.4375,1162.8677,397.4375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="437.5" y2="457.5"/><polygon fill="#181818" points="1158.8677,447.5,1162.8677,457.5,1166.8677,447.5,1162.8677,451.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="491.5625" y2="511.5625"/><polygon fill="#181818" points="1158.8677,501.5625,1162.8677,511.5625,1166.8677,501.5625,1162.8677,505.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="545.625" y2="565.625"/><polygon fill="#181818" points="1158.8677,555.625,1162.8677,565.625,1166.8677,555.625,1162.8677,559.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="599.6875" y2="619.6875"/><polygon fill="#181818" points="1158.8677,609.6875,1162.8677,619.6875,1166.8677,609.6875,1162.8677,613.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1511.8755" x2="1511.8755" y1="221.25" y2="241.25"/><polygon fill="#181818" points="1507.8755,231.25,1511.8755,241.25,1515.8755,231.25,1511.8755,235.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1511.8755" x2="1511.8755" y1="275.3125" y2="295.3125"/><polygon fill="#181818" points="1507.8755,285.3125,1511.8755,295.3125,1515.8755,285.3125,1511.8755,289.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="808.2156" x2="56.4668" y1="139.4063" y2="139.4063"/><line style="stroke:#181818;stroke-width:1;" x1="56.4668" x2="56.4668" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="52.4668,177.1875,56.4668,187.1875,60.4668,177.1875,56.4668,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35.3794" x="56.4668" y="167.0566">Silence</text><line style="stroke:#181818;stroke-width:1;" x1="856.2156" x2="1511.8755" y1="139.4063" y2="139.4063"/><line style="stroke:#181818;stroke-width:1;" x1="1511.8755" x2="1511.8755" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="1507.8755,177.1875,1511.8755,187.1875,1515.8755,177.1875,1511.8755,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="27.4893" x="1511.8755" y="167.0566">Slope</text><line style="stroke:#181818;stroke-width:1;" x1="146.4258" x2="146.4258" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="142.4258,177.1875,146.4258,187.1875,150.4258,177.1875,146.4258,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34.5522" x="146.4258" y="162.0566">Marser</text><line style="stroke:#181818;stroke-width:1;" x1="225.561" x2="225.561" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="221.561,177.1875,225.561,187.1875,229.561,177.1875,225.561,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23.5522" x="225.561" y="162.0566">Note</text><line style="stroke:#181818;stroke-width:1;" x1="388.7886" x2="388.7886" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="384.7886,177.1875,388.7886,187.1875,392.7886,177.1875,388.7886,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77.3438" x="388.7886" y="162.0566">VariableChange</text><line style="stroke:#181818;stroke-width:1;" x1="746.4243" x2="746.4243" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="742.4243,177.1875,746.4243,187.1875,750.4243,177.1875,746.4243,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24.6479" x="746.4243" y="162.0566">Loop</text><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="139.4063" y2="187.1875"/><polygon fill="#181818" points="1158.8677,177.1875,1162.8677,187.1875,1166.8677,177.1875,1162.8677,181.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30.9106" x="1162.8677" y="162.0566">Tuplet</text><line style="stroke:#181818;stroke-width:1;" x1="56.4668" x2="56.4668" y1="221.25" y2="675.75"/><line style="stroke:#181818;stroke-width:1;" x1="56.4668" x2="820.2156" y1="675.75" y2="675.75"/><polygon fill="#181818" points="810.2156,671.75,820.2156,675.75,810.2156,679.75,814.2156,675.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1511.8755" x2="1511.8755" y1="329.375" y2="675.75"/><line style="stroke:#181818;stroke-width:1;" x1="1511.8755" x2="844.2156" y1="675.75" y2="675.75"/><polygon fill="#181818" points="854.2156,671.75,844.2156,675.75,854.2156,679.75,850.2156,675.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="146.4258" x2="146.4258" y1="221.25" y2="675.75"/><polygon fill="#181818" points="142.4258,665.75,146.4258,675.75,150.4258,665.75,146.4258,669.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="225.561" x2="225.561" y1="221.25" y2="675.75"/><polygon fill="#181818" points="221.561,665.75,225.561,675.75,229.561,665.75,225.561,669.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.7886" x2="388.7886" y1="221.25" y2="675.75"/><polygon fill="#181818" points="384.7886,665.75,388.7886,675.75,392.7886,665.75,388.7886,669.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="746.4243" x2="746.4243" y1="383.4375" y2="675.75"/><polygon fill="#181818" points="742.4243,665.75,746.4243,675.75,750.4243,665.75,746.4243,669.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1162.8677" x2="1162.8677" y1="653.75" y2="675.75"/><polygon fill="#181818" points="1158.8677,665.75,1162.8677,675.75,1166.8677,665.75,1162.8677,669.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="832.2156" x2="832.2156" y1="107.4063" y2="127.4063"/><polygon fill="#181818" points="828.2156,117.4063,832.2156,127.4063,836.2156,117.4063,832.2156,121.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="832.2156" x2="832.2156" y1="687.75" y2="707.75"/><polygon fill="#181818" points="828.2156,697.75,832.2156,707.75,836.2156,697.75,832.2156,701.75" style="stroke:#181818;stroke-width:1;"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="445.1465" x="65.8887" y="738.0273">Les m&#233;thodes et champs de l'argument "context" et "self" ont &#233;t&#233; raccourcis pour gagner de la place.</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="556.9238" x="10" y="749.7461">"t" will be incremented by placing the length instruction in "slopes". Context.render will tick every slope variable at every frame.</text><!--SRC=[pLJ1Rjim3BthAmXVvgo5Fs11JhbslJJO9GW2HQPjeOeaI7IoV5A_epysofPTD-jff_bYW-8Z7n-VJ9eCmiwzegsaz-OcXC66e76EC8WdZ71-VwFErVo51AgJPn-XHZ3VP6ZxCrg2GZbB-9kAb554D4q17046lhz1a4gvFYWTmVCRMjbQ34C92Tv8XPKe67lLni09GLiLCDN56awt8KFR5gXZ0DgMEiw857f5sbd-vex6UOn51TkHHnNGrjnYg4XQlG9UCDnWo8EB35gUU6f9ETu4UMOI3CfZYqWoa13bTYNYLPFgeDojX98HeNpHJ4FXIW0_FyPMvREpk5hdZ9yoH0npGkmDmGRsX-dycPjyXjiP-okpstRIjbFMH3dkBJCzS34r75TuaQQSJ-SYJyxv37McFkRr95WMI1dcMtB-aADcsHPKXnEBrmMwuM8iUDgUjkH0zI6a_KyPh5ItzD9wcf7wO65HYpiDYo_7Ze-mO3cnUBW33C7ltAktD0-wwxr1ogDcEiViaWry3doCAutgZII4pbtXB2qxWrtD0aBiNCypDfgIiPBbfXd76kl_HjIbE1_seEIDfPZBeuoCFiZRL-8EdIvEry0IQmCi0WiH1nb6WKRrSntFIsJtVh6xl_O-3JEjxILTnBoryVB2mmPAbAexZfSn-VmH5e7Hy7VY_hjyOzVzNST3LGVdqmfviF7Yft-1y-8F]--></g></svg>